<div class="container mt-4">
    <div class="row">
        <div class="col-md-6">
            {{#if product.thumbnails.[0]}}
            <img src="{{product.thumbnails.[0]}}" class="img-fluid" alt="{{product.title}}">
            {{/if}}
        </div>
        <div class="col-md-6">
            <h2>{{product.title}}</h2>
            <p>{{product.description}}</p>
            <p><strong>Código:</strong> {{product.code}}</p>
            <p><strong>Categoría:</strong> {{product.category}}</p>
            <p><strong>Precio:</strong> ${{product.price}}</p>
            <p><strong>Stock:</strong> {{product.stock}}</p>
            <button class="btn btn-success add-to-cart" data-id="{{product._id}}">Agregar al carrito</button>
        </div>
    </div>
</div>

<script>
document.querySelector(".add-to-cart").addEventListener("click", async ()=>{
    const pid = "{{product._id}}";
    const cid = "691961f2175cb8dcb247d597";
    const res = await fetch(`/api/carts/${cid}/product/${pid}`, { method: "POST" });
    const data = await res.json();
    alert(data.payload);
});
</script>